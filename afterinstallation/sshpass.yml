--- 
  - hosts: centos7
    gather_facts: false
    name: Gather System Information
    tasks: 
      - name: check rpm
        shell: rpm -qa sshpass
        register: ssh_status

      - debug:
          var: ssh_status
      
      - name: Check OS version
        shell: cat /etc/centos-release
        register: os_status
      - debug:
          var: os_status

      

      - name: Copy SSHPASS
        copy: src=/ASEX/share/amogh.pawaskar/for_all/sshpass-1.06-2.el7.x86_64.rpm dest=/srv/local mode=777
        when: os_status.stdout == "CentOS Linux release 7.7.1908 (Core)" or os_status.stdout == "CentOS Linux release 7.9.2009 (Core)"

      - name: INSTALL SSH PASS
        shell: rpm -ivh /srv/local/sshpass-1.06-2.el7.x86_64.rpm
        when: ssh_status.stdout == "" and os_status.stdout == "CentOS Linux release 7.7.1908 (Core)" or ssh_status.stdout == "" and os_status.stdout == "CentOS Linux release 7.9.2009 (Core)"